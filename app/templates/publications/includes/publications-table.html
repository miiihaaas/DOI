{% if publications.items %}
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Tip</th>
                    <th>Naziv</th>
                    <th>Identifikator</th>
                    <th>Jezik</th>
                    <th>Status</th>
                    <th>Kreirana</th>
                    <th>Akcije</th>
                </tr>
            </thead>
            <tbody>
                {% for publication in publications.items %}
                    <tr class="{% if not publication.is_active %}table-secondary{% endif %}">
                        <td>
                            {% if publication.publication_type.value == 'journal' %}
                                <span class="badge bg-primary"><i class="bi bi-journal-richtext"></i> Časopis</span>
                            {% elif publication.publication_type.value == 'book_series' %}
                                <span class="badge bg-info"><i class="bi bi-collection"></i> Serija</span>
                            {% elif publication.publication_type.value == 'book_set' %}
                                <span class="badge bg-warning"><i class="bi bi-box-seam"></i> Komplet</span>
                            {% elif publication.publication_type.value == 'book' %}
                                <span class="badge bg-success"><i class="bi bi-book"></i> Knjiga</span>
                            {% endif %}
                        </td>
                        <td>
                            <strong>{{ publication.title }}</strong>
                            {% if publication.subtitle %}
                                <br><small class="text-muted">{{ publication.subtitle }}</small>
                            {% endif %}
                        </td>
                        <td>
                            {% if publication.publication_type.value == 'journal' and publication.journal_issn %}
                                <span class="badge bg-light text-dark">ISSN: {{ publication.journal_issn }}</span>
                            {% elif publication.publication_type.value == 'book_series' and publication.series_issn %}
                                <span class="badge bg-light text-dark">ISSN: {{ publication.series_issn }}</span>
                            {% elif publication.publication_type.value == 'book_set' and publication.set_isbn %}
                                <span class="badge bg-light text-dark">ISBN: {{ publication.set_isbn }}</span>
                            {% elif publication.publication_type.value == 'book' and publication.isbn %}
                                <span class="badge bg-light text-dark">ISBN: {{ publication.isbn }}</span>
                            {% else %}
                                <span class="text-muted">N/A</span>
                            {% endif %}
                        </td>
                        <td>{{ publication.language_code.upper() }}</td>
                        <td>
                            {% if publication.is_active %}
                                <span class="badge bg-success">Aktivna</span>
                            {% else %}
                                <span class="badge bg-secondary">Neaktivna</span>
                            {% endif %}
                        </td>
                        <td>{{ publication.created_at.strftime('%d.%m.%Y') }}</td>
                        <td>
                            <div class="btn-group" role="group">
                                <a href="{{ url_for('publications.detail', publication_id=publication.id) }}" 
                                   class="btn btn-sm btn-outline-primary" title="Prikaži detalje">
                                    <i class="bi bi-eye"></i>
                                </a>
                                <a href="{{ url_for('publications.edit', publication_id=publication.id) }}" 
                                   class="btn btn-sm btn-outline-secondary" title="Izmeni">
                                    <i class="bi bi-pencil"></i>
                                </a>
                                <button type="button" 
                                        class="btn btn-sm btn-outline-{% if publication.is_active %}danger{% else %}success{% endif %}" 
                                        onclick="toggleStatus({{ publication.id }}, '{{ publication.is_active }}')"
                                        title="{% if publication.is_active %}Deaktiviraj{% else %}Aktiviraj{% endif %}">
                                    <i class="bi bi-{% if publication.is_active %}x-circle{% else %}check-circle{% endif %}"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    {% if publications.pages > 1 %}
        <nav aria-label="Publikacije paginacija">
            <ul class="pagination justify-content-center" id="ajax-pagination">
                {% if publications.has_prev %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ publications.prev_num }}">
                            <i class="bi bi-chevron-left"></i>
                        </a>
                    </li>
                {% endif %}

                {% for page_num in publications.iter_pages() %}
                    {% if page_num %}
                        {% if page_num != publications.page %}
                            <li class="page-item">
                                <a class="page-link" href="#" data-page="{{ page_num }}">{{ page_num }}</a>
                            </li>
                        {% else %}
                            <li class="page-item active">
                                <span class="page-link">{{ page_num }}</span>
                            </li>
                        {% endif %}
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">…</span>
                        </li>
                    {% endif %}
                {% endfor %}

                {% if publications.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ publications.next_num }}">
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
{% else %}
    <div class="text-center py-5">
        <i class="bi bi-journal-x display-1 text-muted"></i>
        <h4 class="mt-3">Nema publikacija</h4>
        <p class="text-muted">
            {% if current_filter %}
                Nema publikacija tipa "{{ current_filter.replace('_', ' ').title() }}" za ovog člana.
            {% else %}
                Ovaj član još uvek nema kreirana template-a za publikacije.
            {% endif %}
        </p>
        <a href="{{ url_for('publications.create_for_member', member_id=member.id) }}" class="btn btn-primary">
            <i class="bi bi-journal-plus"></i> Kreiraj prvu publikaciju
        </a>
    </div>
{% endif %}