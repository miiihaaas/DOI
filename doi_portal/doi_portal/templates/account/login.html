{% extends "base.html" %}
{% load i18n crispy_forms_tags %}

{% block title %}{% translate "Sign In" %} - DOI Portal{% endblock title %}

{% block bodyclass %}bg-light{% endblock bodyclass %}

{% block body %}
<div class="container">
  <div class="row justify-content-center mt-5">
    <div class="col-md-6 col-lg-4">
      <div class="card shadow">
        <div class="card-body p-4">
          <div class="text-center mb-4">
            <h2 class="card-title h4">{% translate "Sign In" %}</h2>
            <p class="text-muted">{% translate "Access your DOI Portal account" %}</p>
          </div>

          {% if form.errors %}
            <div class="alert alert-danger" role="alert">
              {% translate "The email address and/or password you specified are not correct." %}
            </div>
          {% endif %}

          <form method="post" action="{% url 'account_login' %}">
            {% csrf_token %}

            <div class="mb-3">
              <label for="id_login" class="form-label">{% translate "Email" %}</label>
              <input type="email"
                     name="login"
                     id="id_login"
                     class="form-control {% if form.login.errors %}is-invalid{% endif %}"
                     placeholder="{% translate 'Email address' %}"
                     autocomplete="email"
                     required />
              {% if form.login.errors %}
                <div class="invalid-feedback">{{ form.login.errors.0 }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="id_password" class="form-label">{% translate "Password" %}</label>
              <input type="password"
                     name="password"
                     id="id_password"
                     class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                     placeholder="{% translate 'Password' %}"
                     autocomplete="current-password"
                     required />
              {% if form.password.errors %}
                <div class="invalid-feedback">{{ form.password.errors.0 }}</div>
              {% endif %}
            </div>

            {% if form.remember %}
              <div class="mb-3 form-check">
                <input type="checkbox"
                       name="remember"
                       id="id_remember"
                       class="form-check-input" />
                <label for="id_remember" class="form-check-label">
                  {% translate "Remember Me" %}
                </label>
              </div>
            {% endif %}

            {% if redirect_field_value %}
              <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}

            <button type="submit" class="btn btn-primary w-100 mt-3">
              {% translate "Sign In" %}
            </button>
          </form>

          <div class="text-center mt-3">
            <a href="{% url 'account_reset_password' %}" class="text-decoration-none">
              {% translate "Forgot your password?" %}
            </a>
          </div>

          {% if ACCOUNT_ALLOW_REGISTRATION %}
            <hr class="my-4" />
            <div class="text-center">
              <span class="text-muted">{% translate "Don't have an account?" %}</span>
              <a href="{% url 'account_signup' %}" class="text-decoration-none ms-1">
                {% translate "Sign Up" %}
              </a>
            </div>
          {% endif %}
        </div>
      </div>

      <div class="text-center mt-3">
        <a href="{% url 'home' %}" class="text-muted text-decoration-none">
          &larr; {% translate "Back to Home" %}
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock body %}
